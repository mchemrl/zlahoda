<!DOCTYPE html>
<html xmlns:pdf="">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <title>Store Products Report</title>
  <style type="text/css">
    @page {
      size: a4 portrait;
      @frame header_frame {
        -pdf-frame-content: header_content;
        left: 50pt; width: 495pt; top: 50pt; height: 40pt;
      }
      @frame content_frame {
        left: 50pt; width: 495pt; top: 100pt; height: 632pt;
      }
      @frame footer_frame {
        -pdf-frame-content: footer_content;
        left: 50pt; width: 495pt; top: 772pt; height: 20pt;
      }
    }

    body {
      font-family: Arial, sans-serif;
    }

    #header_content {
      text-align: center;
    }

    h1 {
      font-size: 24pt;
      margin: 0;
      padding: 0;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      padding: 8pt;
      border: 1pt solid #ddd;
      text-align: left;
    }

    th {
      background-color: #f2f2f2;
    }

    #footer_content {
      text-align: center;
      font-size: 10pt;
      color: #777;
    }

    .export-btn {
      text-align: center;
      margin-bottom: 20pt;
    }

    .export-btn button {
      padding: 10pt 18pt;
      font-size: 12pt;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 4pt;
      cursor: pointer;
    }

    @media screen {
      body {
        background-color: #f0f0f0;
        margin: 0;
        padding: 20px;
        display: flex;
        justify-content: center;
      }

      .page-preview {
        width: 794px;
        height: 1123px;
        background-color: white;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        padding: 0;
        margin: 0 auto;
        position: relative;
        overflow: hidden;
      }

      #header_content {
        position: absolute;
        left: 50pt;
        top: 50pt;
        width: 495pt;
        height: 40pt;
      }

      .content-area {
        position: absolute;
        left: 50pt;
        top: 100pt;
        width: 495pt;
        height: 632pt;
        overflow: auto;
      }

      #footer_content {
        position: absolute;
        left: 50pt;
        bottom: 50pt;
        width: 495pt;
        height: 20pt;
      }

      pdf\:pagenumber, pdf\:pagecount {
        display: none;
      }

      .preview-page-number::after {
        content: "Page 1 of 1";
      }

      .multiple-pages .preview-page-number::after {
        content: "Page 1 of " attr(data-total-pages);
      }
    }
  </style>
  <script type="text/javascript">
    window.onload = function() {
      var contentArea = document.querySelector('.content-area');
      var table = document.querySelector('table');

      if (contentArea && table) {
        var contentHeight = table.offsetHeight;
        var availableHeight = 632;
        var totalPages = Math.ceil(contentHeight / availableHeight);

        var previewPageNumber = document.querySelector('.preview-page-number');
        if (previewPageNumber) {
          if (totalPages > 1) {
            previewPageNumber.setAttribute('data-total-pages', totalPages);
            previewPageNumber.parentElement.classList.add('multiple-pages');
          }
        }
      }
    };
  </script>
</head>
<body>
  <div class="page-preview">
    <div id="header_content">
      <h1>Store Products Report</h1>
    </div>

    <div class="content-area">
      {% if show_export %}
      <div class="export-btn">
        <a href="{{ url_for('api.store_product_report.export_pdf') }}" target="_blank">
          <button type="button">Export as PDF</button>
        </a>
      </div>
      {% endif %}

      <table>
            <thead>
              <tr>
                <th width="60">UPC</th>
      <th width="80">Promo UPC</th>
      <th width="180">Product Name</th>
      <th width="60">Price</th>
      <th width="60">Quantity</th>
      <th width="55">Promo</th>
              </tr>
            </thead>
            <tbody>
              {% for p in items %}
                <tr>
                  <td>{{ p.upc }}</td>
                  <td>{{ p.upc_prom }}</td>
                  <td>{{ p.product_name }}</td>
                  <td>{{ p.selling_price }}</td>
                  <td>{{ p.products_number }}</td>
                  <td>{{ p.promotional_product }}</td>
                </tr>
              {% endfor %}
        </tbody>
      </table>
    </div>

 <div id="footer_content">
      Zlahoda report copyright. Page <span class="preview-page-number"></span><pdf:pagenumber> of <pdf:pagecount>
    </div>
  </div>
</body>
</html>